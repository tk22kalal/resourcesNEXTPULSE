<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        #suggestionList {
            list-style: none;
            padding: 0;
            margin: 0;
            position: absolute;
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            z-index: 1;
            max-height: 300px;
            overflow-y: auto;
        }

        #suggestionList li {
            padding: 8px;
            cursor: pointer;
        }

        .main-buttons {
            margin-top: 20px;
        }

        .additional-buttons {
            margin-top: 20px;
            display: none;
        }

        .collapsible-text {
            display: none;
        }
    </style>
</head>
<body>

    <form>
        <label for="searchInput">Search:</label>
        <div style="position: relative;">
            <input type="text" id="searchInput" placeholder="Enter your search term..." oninput="getSuggestions()">
            <ul id="suggestionList"></ul>
        </div>
    </form>

    <div class="main-buttons">
        <!-- The main button - PREPLADDER -->
        <button id="prepladderButton" onclick="showPrepladderButtons()">PREPLADDER</button>

        <!-- The main button - MARROW -->
        <button id="marrowButton" onclick="showMarrowButtons()">MARROW</button>
    </div>

    <div class="additional-buttons1">
        <!-- Anatomy button and its collapsible text -->
        <button id="anatomyButton" onclick="fetchAndToggleContent('anatomyp.html', 'anatomyText', 'anatomy-section')">ANATOMY</button>
        <div class="collapsible-text" id="anatomyText"></div>
      
        <!-- Biochemistry button and its collapsible text -->
        <button id="biochemistryButton" onclick="fetchAndToggleContent('biochemestryp.html', 'biochemestryText')">BIOCHEMESTRY</button>
        <div class="collapsible-text" id="biochemestryText">
            <!-- Biochemistry content will be dynamically inserted here -->
        </div>
    </div>

    <!-- Include this script only if you trust the source -->
    <script type='text/javascript' src='//pl22368920.toprevenuegate.com/0f/28/80/0f288043c41188f69548c49fed467531.js'></script>

    <script>
        function getSuggestions() {
            const input = document.getElementById('searchInput').value.toLowerCase();
            const suggestionList = document.getElementById('suggestionList');

            // GitHub URL of the HTML files in the plugins folder
            const githubURL = 'https://raw.githubusercontent.com/tk22kalal/resourcesNEXTPULSE/master/plugins/';

            // Array of filenames to search through
            const filenames = [];

            // Iterate through each set of buttons
            for (let i = 1; ; i++) {
                const buttonSet = document.querySelector('.additional-buttons' + i);
                if (!buttonSet) break;

                // Iterate through each button in the set and extract filenames
                const buttons = buttonSet.querySelectorAll('button');
                buttons.forEach(button => {
                    const onclickAttribute = button.getAttribute('onclick');
                    if (onclickAttribute) {
                        const filename = onclickAttribute.match(/fetchAndToggleContent\('([^']*)'/)[1];
                        filenames.push(filename);
                    }
                });
            }

            // Clear previous suggestions
            suggestionList.innerHTML = '';

            // Check if the input is empty
            if (input.trim() === '') {
                return; // Do not show suggestions if the input is empty
            }

            // Iterate through each filename
            filenames.forEach(filename => {
                // Fetch the HTML content
                fetch(githubURL + filename)
                    .then(response => response.text())
                    .then(html => {
                        const parser = new DOMParser();
                        const doc = parser.parseFromString(html, 'text/html');

                        // Get the table from the fetched HTML
                        const table = doc.querySelector('table');

                        // Iterate through each row in the table
                        for (let i = 1; i < table.rows.length; i++) {
                            const rowText = table.rows[i].textContent.toLowerCase();

                            // Check if the input matches any part of the row text
                            if (rowText.includes(input)) {
                                const suggestionItem = document.createElement('li');
                                const link = table.rows[i].querySelector('a');
                                if (link) {
                                    suggestionItem.innerHTML = `<a href="${link.href}" target="_blank">${rowText}</a>`;
                                } else {
                                    suggestionItem.textContent = rowText;
                                }
                                suggestionList.appendChild(suggestionItem);
                            }
                        }
                    })
                    .catch(error => console.error('Error fetching data:', error));
            });
        }

        function fetchAndToggleContent(filename, targetId, sectionId) {
            // Your existing fetchAndToggleContent function
        }

        function showPrepladderButtons() {
            var prepladderButton = document.getElementById('prepladderButton');
            prepladderButton.style.display = 'none';

            var marrowButton = document.getElementById('marrowButton');
            marrowButton.style.display = 'none';

            var prepladderButtonsContainer = document.querySelector('.additional-buttons1');
            prepladderButtonsContainer.style.display = 'block';
        }

        function showMarrowButtons() {
            var marrowButton = document.getElementById('marrowButton');
            marrowButton.style.display = 'none';

            var prepladderButton = document.getElementById('prepladderButton');
            prepladderButton.style.display = 'none';

            var marrowButtonsContainer = document.querySelector('.additional-buttons2');
            marrowButtonsContainer.style.display = 'block';
        }
    </script>

</body>
</html>
